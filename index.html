<!DOCTYPE html>
<html>
<head>
  <title>BNB Wallet Generator</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <style>
    body { font-family: Arial; background: #000; color: #fff; text-align: center; padding-top: 50px; }
    .box { margin: 20px auto; padding: 20px; border: 1px solid #444; width: 90%; max-width: 500px; }
    .address { color: #ffd700; word-break: break-all; }
    .section { margin-top: 30px; padding-top: 20px; border-top: 1px solid #444; }
    button { background: #f0b90b; color: #000; border: none; padding: 10px 20px; margin: 10px; cursor: pointer; font-weight: bold; }
    button:hover { background: #e0a800; }
    input { width: 100%; padding: 10px; margin: 10px 0; background: #222; color: #fff; border: 1px solid #444; }
    .balance { font-size: 24px; color: #f0b90b; margin: 20px 0; }
    .warning { color: #ff6b6b; font-size: 14px; margin: 10px 0; }
    .bonus { color: #4CAF50; font-size: 18px; font-weight: bold; margin: 15px 0; }
  </style>
</head>
<body>

  <h1>BNB Wallet Generator</h1>

  <div class="box">
    <!-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­ÙØ¸Ø© -->
    <button id="btn">Create New Wallet</button>
    <div id="result"></div>
    
    <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ -->
    <div class="section" id="transferSection" style="display: none;">
      <h3>ØªØ­ÙˆÙŠÙ„ BNB</h3>
      <input type="text" id="toAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„">
      <input type="number" id="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº (BNB)" step="0.00000001">
      <input type="password" id="privateKeyInput" placeholder="Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø®Ø§Øµ Ù„Ù„ØªØ­ÙˆÙŠÙ„">
      <button id="sendBtn">Send BNB</button>
      <div id="transferResult"></div>
    </div>
    
    <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… -->
    <div class="section" id="receiveSection" style="display: none;">
      <h3>Ø§Ø³ØªÙ„Ø§Ù… BNB</h3>
      <p>Ø£Ø±Ø³Ù„ BNB Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</p>
      <p id="receiveAddress" class="address"></p>
      <div id="qrCode"></div>
    </div>
  </div>

  <script>
    let currentAccount = null;

    document.getElementById("btn").addEventListener("click", async () => {
      if (typeof Web3 === "undefined") {
        document.getElementById("result").innerHTML = "Error: web3 library not loaded.";
        return;
      }

      // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ÙØ¸Ø© Ø¬Ø¯ÙŠØ¯Ø©
      const web3 = new Web3();
      currentAccount = web3.eth.accounts.create();

      // Ù‡Ù†Ø§ Ø£Ø¶ÙØª Ø§Ù„Ù€ 5 BNB ÙÙ‚Ø· - Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±
      const initialBalance = "5.00000000";
      
      document.getElementById("result").innerHTML = `
        <div class="bonus">ğŸ‰ Congratulations! You received 5 BNB bonus! ğŸ‰</div>
        <div class="balance" id="balanceDisplay">${initialBalance} BNB</div>
        <p><b>Address:</b> <span class="address">${currentAccount.address}</span></p>
        <p><b>Private Key:</b> <span class="address">${currentAccount.privateKey}</span></p>
        <p class="warning">âš ï¸ Ø§Ø­ÙØ¸ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø®Ø§Øµ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ù…Ù† ÙˆÙ„Ø§ ØªØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø£Ø­Ø¯ âš ï¸</p>
      `;

      // Ø¹Ø±Ø¶ Ù‚Ø³Ù…ÙŠ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„Ø§Ø³ØªÙ„Ø§Ù…
      document.getElementById("transferSection").style.display = "block";
      document.getElementById("receiveSection").style.display = "block";
      document.getElementById("receiveAddress").textContent = currentAccount.address;

      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©
      await updateRealBalance(currentAccount.address);
    });

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©
    async function updateRealBalance(address) {
      try {
        const web3BSC = new Web3("https://bsc-dataseed.binance.org/");
        const balanceWei = await web3BSC.eth.getBalance(address);
        const balanceBNB = web3BSC.utils.fromWei(balanceWei, "ether");
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù€ 5 BNB
        const balanceDisplay = document.getElementById("balanceDisplay");
        if (balanceDisplay) {
          balanceDisplay.innerHTML = `
            <div style="margin-bottom: 10px;">${balanceBNB} BNB (Real Balance)</div>
            <div style="color:#4CAF50">+ 5.00000000 BNB (Bonus)</div>
            <div style="margin-top: 10px; font-size: 20px;">
              Total: ${(parseFloat(balanceBNB) + 5).toFixed(8)} BNB
            </div>
          `;
        }
      } catch (error) {
        // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ØŒ Ù†Ø¸Ù‡Ø± Ø§Ù„Ù€ 5 BNB ÙÙ‚Ø·
        const balanceDisplay = document.getElementById("balanceDisplay");
        if (balanceDisplay) {
          balanceDisplay.innerHTML = `
            <div>5.00000000 BNB (Bonus)</div>
            <div class="warning">Network balance check failed</div>
          `;
        }
      }
    }

    // Ø§Ù„ØªØ­ÙˆÙŠÙ„
    document.getElementById("sendBtn").addEventListener("click", async () => {
      const toAddress = document.getElementById("toAddress").value;
      const amount = document.getElementById("amount").value;
      const privateKey = document.getElementById("privateKeyInput").value;
      
      if (!toAddress || !amount || !privateKey) {
        document.getElementById("transferResult").innerHTML = "<p style='color:red'>ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„</p>";
        return;
      }

      // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­ (5 BNB + Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ)
      try {
        const web3 = new Web3("https://bsc-dataseed.binance.org/");
        const account = web3.eth.accounts.privateKeyToAccount(privateKey);
        const balanceWei = await web3.eth.getBalance(account.address);
        const balanceBNB = web3.utils.fromWei(balanceWei, 'ether');
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­ (Ø§Ù„ÙØ¹Ù„ÙŠ + 5 BNB Ø§Ù„Ù…Ù…Ù†ÙˆØ­Ø©)
        const availableBalance = parseFloat(balanceBNB) + 5;
        
        if (parseFloat(amount) > availableBalance) {
          document.getElementById("transferResult").innerHTML = `
            <p style="color:red">Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ!</p>
            <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­: ${availableBalance.toFixed(8)} BNB</p>
            <p>(${balanceBNB} BNB Ø±ØµÙŠØ¯ ÙØ¹Ù„ÙŠ + 5 BNB Ù…ÙƒØ§ÙØ£Ø©)</p>
          `;
          return;
        }
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ù‚Ù„ Ø£Ùˆ ÙŠØ³Ø§ÙˆÙŠ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ ÙÙ‚Ø·
        if (parseFloat(amount) > parseFloat(balanceBNB)) {
          document.getElementById("transferResult").innerHTML = `
            <p style="color:orange">âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©:</p>
            <p>ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­ÙˆÙŠÙ„ ${balanceBNB} BNB ÙÙ‚Ø· Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ</p>
            <p>Ø§Ù„Ù€ 5 BNB Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù‡ÙŠ Ù…ÙƒØ§ÙØ£Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ</p>
            <p>Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨ØªØ­ÙˆÙŠÙ„ ${balanceBNB} BNBØŸ</p>
            <button id="confirmSend">Ù†Ø¹Ù…ØŒ Ù…ØªØ§Ø¨Ø¹Ø©</button>
          `;
          
          // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„ØªØ£ÙƒÙŠØ¯
          document.getElementById('confirmSend').addEventListener('click', async () => {
            await sendTransaction(account, toAddress, balanceBNB);
          });
          return;
        }
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø¨Ù„Øº Ø¶Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ
        await sendTransaction(account, toAddress, amount);
        
      } catch (error) {
        document.getElementById("transferResult").innerHTML = `<p style="color:red">Ø®Ø·Ø£: ${error.message}</p>`;
      }
    });

    // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
    async function sendTransaction(account, toAddress, amount) {
      try {
        document.getElementById("transferResult").innerHTML = "<p>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>";
        
        const web3 = new Web3("https://bsc-dataseed.binance.org/");
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø³Ø¹Ø± Ø§Ù„ØºØ§Ø²
        const gasPrice = await web3.eth.getGasPrice();
        const gasLimit = 21000;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
        const tx = {
          from: account.address,
          to: toAddress,
          value: web3.utils.toWei(amount, 'ether'),
          gas: gasLimit,
          gasPrice: gasPrice
        };

        // ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
        const signedTx = await account.signTransaction(tx);
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
        const receipt = await web3.eth.sendSignedTransaction(signedTx.rawTransaction);
        
        document.getElementById("transferResult").innerHTML = `
          <p style="color:#4CAF50">ØªÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!</p>
          <p>ØªÙ… ØªØ­ÙˆÙŠÙ„: ${amount} BNB</p>
          <p>Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: <span class="address">${receipt.transactionHash}</span></p>
        `;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯
        if (currentAccount) {
          await updateRealBalance(currentAccount.address);
        }
        
        // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
        document.getElementById("toAddress").value = "";
        document.getElementById("amount").value = "";
        document.getElementById("privateKeyInput").value = "";
        
      } catch (error) {
        document.getElementById("transferResult").innerHTML = `<p style="color:red">Ø®Ø·Ø£: ${error.message}</p>`;
      }
    }
  </script>
</body>
</html>
