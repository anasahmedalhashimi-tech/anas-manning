<!DOCTYPE html>
<html>
<head>
  <title>My BNB Wallet</title>
  <script src="ethers.min.js"></script>
  <style>
    body { font-family: Arial; background: #000; color: #fff; text-align: center; }
    .box { margin: 20px auto; padding: 20px; border: 1px solid #444; width: 90%; max-width: 600px; }
    .address { color: #ffd700; word-break: break-all; }
    input { padding: 10px; margin: 5px; width: 80%; }
    button { padding: 10px 20px; margin: 10px; }
  </style>
</head>
<body>

  <h1>My BNB Wallet</h1>

  <div class="box">
    <button id="create">Create Wallet</button>
    <button id="load">Load Wallet</button>
    <div id="info"></div>
  </div>

  <div class="box">
    <h3>Send BNB</h3>
    <input id="to" placeholder="Recipient Address" />
    <input id="amount" placeholder="Amount in BNB" />
    <button id="send">Send</button>
    <div id="sendResult"></div>
  </div>

  <div class="box">
    <h3>BNB Price Chart</h3>
    <div id="chart"></div>
  </div>

  <script>
    let wallet, provider;

    // Create wallet
    document.getElementById("create").onclick = () => {
      wallet = ethers.Wallet.createRandom();
      localStorage.setItem("pk", wallet.privateKey);
      showWallet();
    };

    // Load wallet from local storage
    document.getElementById("load").onclick = () => {
      const pk = localStorage.getItem("pk");
      if (!pk) return alert("No wallet saved. Create one first.");
      wallet = new ethers.Wallet(pk);
      showWallet();
    };

    async function showWallet() {
      provider = new ethers.providers.JsonRpcProvider("https://bsc-dataseed.binance.org/");
      const balance = await provider.getBalance(wallet.address);
      const balanceBNB = ethers.utils.formatEther(balance);

      document.getElementById("info").innerHTML = `
        <p>Address: <span class="address">${wallet.address}</span></p>
        <p>Balance: ${balanceBNB} BNB</p>
        <p>Private Key (save it): <span class="address">${wallet.privateKey}</span></p>
      `;
    }

    // Send BNB
    document.getElementById("send").onclick = async () => {
      if (!wallet) return alert("Load wallet first");
      const to = document.getElementById("to").value;
      const amount = document.getElementById("amount").value;
      const tx = {
        to,
        value: ethers.utils.parseEther(amount),
        gasLimit: 21000
      };
      const signedTx = await wallet.signTransaction(tx);
      const sent = await provider.sendTransaction(signedTx);
      document.getElementById("sendResult").innerHTML = "Tx Hash: " + sent.hash;
    };

    // Chart
    async function loadChart() {
      const res = await fetch("https://api.coingecko.com/api/v3/coins/binancecoin/market_chart?vs_currency=usd&days=7");
      const data = await res.json();
      const prices = data.prices.slice(-10);
      document.getElementById("chart").innerHTML = prices.map(p => `<div>${new Date(p[0]).toLocaleString()} = $${p[1].toFixed(2)}</div>`).join("");
    }
    loadChart();
  </script>
</body>
</html>
